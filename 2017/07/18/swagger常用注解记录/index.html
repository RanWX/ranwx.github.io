<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> swagger常用注解 | Rosy's</title><meta name="description" content="swagger常用注解 - Rosy"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/casual.css"><link rel="stylesheet" href="/css/semantic.min.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Rosy's"></head><body><div class="sidebar"><div class="ui vertical inverted menu"><div class="h100"></div><h3 class="ui inverted aligned icon header"><div class="content"><a href="/" class="title-link">ROSY'S</a></div></h3><div class="h50"></div><div class="side-nav"><a href="/" target="_self" class="item">HOME<i class="icon home"></i></a><a href="/archives" target="_self" class="item">ARCHIVE<i class="icon archive"></i></a><a href="/tags" target="_self" class="item">TAGS<i class="icon tags"></i></a><a href="/about" target="_self" class="item">INFO<i class="icon info"></i></a><a href="/atom.xml" target="_self" class="item">RSS<i class="icon rss"></i></a></div><div class="item"><div class="ui inverted transparent icon input"><input type="text" placeholder="Search..." class="st-default-search-input"><i class="search icon"></i></div></div><div class="h50"></div></div><div class="h50 mq"><a class="ui teal big label"><i class="content icon"></i></a></div><div class="author-info"><a href="/" class="img-link"><img src="/me.jpeg" class="author-photo ui tiny circular image"></a><h4 class="ui aligned icon header"><div class="content">Rosy</div></h4><p class="author-desc">常常将自己分裂成三个人用于玩斗地主的双子女 | 热衷于烹饪 | 喜欢刘亦菲</p><div class="social-outer"><div class="social-inner"><a href="http://github.com/RanWX" target="_blank" class="social-link"><i class="icon github"></i></a><a href="http://weibo.com/u/2176147782?refer_flag=1005055010_&amp;is_all=1" target="_blank" class="social-link"><i class="icon weibo"></i></a></div></div></div></div><div class="main"><div class="wrap"><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">swagger常用注解</h1><div class="post-info"><div class="post-date"><h6 class="ui header"><i class="calendar icon"></i><div class="content">Jul 18, 2017</div></h6></div></div><div class="post-content"><p>翻译自<a href="https://github.com/swagger-api/swagger-core/wiki/Annotations-1.5.X#apiimplicitparam-apiimplicitparams" target="_blank" rel="external">https://github.com/swagger-api/swagger-core/wiki/Annotations-1.5.X#apiimplicitparam-apiimplicitparams</a>.<br>水平有限，不保证翻译准确，仅做自己学习记录之用。</p>
<h2 id="Api资源声明"><a href="#Api资源声明" class="headerlink" title="Api资源声明"></a>Api资源声明</h2><h3 id="Api"><a href="#Api" class="headerlink" title="@Api"></a>@Api</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">@Path(&quot;/pet&quot;)</div><div class="line">@Api(value = &quot;pet&quot;, authorizations = &#123;</div><div class="line">      @Authorization(value=&quot;sampleoauth&quot;, scopes = &#123;&#125;)</div><div class="line">    &#125;)</div><div class="line">@Produces(&#123;&quot;application/json&quot;, &quot;application/xml&quot;&#125;)</div><div class="line">public class PetResource &#123;</div><div class="line"> ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在这个例子中我们可以看出，@Api标签下的所有操作都属于pet类（所有这些操作可以放在一起）。Swagger会选用@Produces标签下的值，但是你也可以根据需要进行覆盖。@Api也可以用于声明资源级别的权限。这些声明可以作用于其下的所有操作，但是这些操作也可以根据需要被重写。<br>除了用value()，也可以使用tags()来为操作设置多个tags，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@Api(tags = &#123;&quot;external_info&quot;,&quot;user_info&quot;&#125;)</div></pre></td></tr></table></figure>
<p>此时，如果存在value()属性，将会被忽略。<br>布尔属性hidden可以用来完全隐藏一个@Api。当使用子资源删除不必要的工件这尤其有用。<br>更多请参见：<a href="http://docs.swagger.io/swagger-core/current/apidocs/index.html?io/swagger/annotations/Api.html" target="_blank" rel="external">javadocs</a>。</p>
<h2 id="操作声明"><a href="#操作声明" class="headerlink" title="操作声明"></a>操作声明</h2><h3 id="ApiOperation"><a href="#ApiOperation" class="headerlink" title="@ApiOperation"></a>@ApiOperation</h3><p>@ApiOperation用于声明单个操作。该操作应该是路径与HTTP方法的唯一结合。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">@GET</div><div class="line"> @Path(&quot;/findByStatus&quot;)</div><div class="line"> @ApiOperation(value = &quot;Finds Pets by status&quot;,</div><div class="line">    notes = &quot;Multiple status values can be provided with comma seperated strings&quot;,</div><div class="line">    response = Pet.class,</div><div class="line">    responseContainer = &quot;List&quot;)</div><div class="line"> public Response findPetsByStatus(...) &#123; ... &#125;</div></pre></td></tr></table></figure>
<ul>
<li><blockquote>
<p>value属性是对这个API的简短描述，最后控制在120个字符以内。</p>
</blockquote>
</li>
<li><blockquote>
<p>notes属于可以对操作进行详细说明。</p>
</blockquote>
</li>
<li><blockquote>
<p>response是方法的返回类型，需要注意的是实际的方法声明返回的是一个通用的JAX-RS的类，而不是实际发送给用户的响应。如果返回的对象是实际的结果，它可以不用背声明直接被使用。</p>
</blockquote>
</li>
<li><blockquote>
<p>responseContainer用于返回一个list。记住Java具有类型擦除功能，因此在返回结果中使用泛型可能导致结果不能被正确解析，所以response应该被直接使用。</p>
</blockquote>
</li>
<li><blockquote>
<p>@Get和@Path标签分别用于操作HTTP方法和告诉我们方法的路径。</p>
</blockquote>
</li>
</ul>
<p>以上生成的API为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&quot;/pet/findByStatus&quot;: &#123;</div><div class="line">  &quot;get&quot;: &#123;</div><div class="line">    &quot;tags&quot;: [</div><div class="line">      &quot;pet&quot;</div><div class="line">    ],</div><div class="line">    &quot;summary&quot;: &quot;Finds Pets by status&quot;,</div><div class="line">    &quot;description&quot;: &quot;Multiple status values can be provided with comma seperated strings&quot;,</div><div class="line">    &quot;responses&quot;: &#123;</div><div class="line">      &quot;200&quot;: &#123;</div><div class="line">        &quot;description&quot;: &quot;successful operation&quot;,</div><div class="line">        &quot;schema&quot;: &#123;</div><div class="line">          &quot;type&quot;: &quot;array&quot;,</div><div class="line">          &quot;items&quot;: &#123;</div><div class="line">            &quot;$ref&quot;: &quot;#/definitions/Pet&quot;</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      &#125;,</div><div class="line">      ...</div></pre></td></tr></table></figure>
<p>更多请参见：<a href="http://docs.swagger.io/swagger-core/current/apidocs/index.html?io/swagger/annotations/Api.html" target="_blank" rel="external">javadocs</a>。</p>
<h3 id="ApiResponses-ApiResponse"><a href="#ApiResponses-ApiResponse" class="headerlink" title="@ApiResponses, @ApiResponse"></a>@ApiResponses, @ApiResponse</h3><p>众所周知可以使用HTTP状态码返回错误或成功信息。返回的类型已经在@ApiOperation定义了，其余的返回码可以在@ApiResponses, @ApiResponse标签中描述。</p>
<p>@ApiResponse用于描述一个操作的可能返回结果。它不能直接被方法，类或者接口使用而需要作为一列值被@ApiResponses包含。<br>如果响应伴随了一个body，那这个body模型也可以被描述。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@ApiResponses(value = &#123; </div><div class="line">      @ApiResponse(code = 400, message = &quot;Invalid ID supplied&quot;, </div><div class="line">                   responseHeaders = @ResponseHeader(name = &quot;X-Rack-Cache&quot;, description = &quot;Explains whether or not a cache was used&quot;, response = Boolean.class)),</div><div class="line">      @ApiResponse(code = 404, message = &quot;Pet not found&quot;) &#125;)</div><div class="line">  public Response getPetById(...) &#123;...&#125;</div></pre></td></tr></table></figure>
<h3 id="Authorization-AuthorizationScope"><a href="#Authorization-AuthorizationScope" class="headerlink" title="@Authorization, @AuthorizationScope"></a>@Authorization, @AuthorizationScope</h3><p>这两个标签仅仅作为@Api和@ApiOperation的输入使用，不能直接用于资源和操作。一旦在API里声明和配置了授权模式，你可以将该标签用于需要的资源或某个操作上。具体使用如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@ApiOperation(value = &quot;Add a new pet to the store&quot;, </div><div class="line">    authorizations = &#123;</div><div class="line">      @Authorization(</div><div class="line">          value=&quot;petoauth&quot;, </div><div class="line">          scopes = &#123; @AuthorizationScope(scope = &quot;add:pet&quot;) &#125;</div><div class="line">          )</div><div class="line">    &#125;</div><div class="line">  )</div><div class="line">  public Response addPet(...) &#123;...&#125;</div></pre></td></tr></table></figure>
<p>在上述例子中，我们声明addPet操作使用了授权模式，然后使用@AuthorizationScope对add:pet进行范围的调整。正如上面提到的，我们可以发现@AuthorizationScope被用作了@Authorization的一个输入，进一步可以作为@ApiOperation的输入。<br>以上生成的API为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&quot;security&quot;: [</div><div class="line">  &#123;</div><div class="line">    &quot;petoauth&quot;: [</div><div class="line">      &quot;add:pet&quot;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<h2 id="ApiParam"><a href="#ApiParam" class="headerlink" title="@ApiParam"></a>@ApiParam</h2><p>@ApiParam只能作为JAX-RS参数标签使用（@PathParam, @QueryParam, @HeaderParam, @FormParam, JAX-RS 2中 @BeanParam）。当swagger-core扫描这些标签时，@ApiParam可以被用于增加更多参数的细节或者改变从代码中读取的值。<br>Swagger采用注解的value()值作为参数名，并且会基于注解设置参数类型。<br>Swagger也会使用@DefaultValue的值作为默认值。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"> @Path(&quot;/&#123;username&#125;&quot;)</div><div class="line"> @ApiOperation(value = &quot;Updated user&quot;,</div><div class="line">    notes = &quot;This can only be done by the logged in user.&quot;)</div><div class="line">public Response updateUser(</div><div class="line">      @ApiParam(value = &quot;name that need to be updated&quot;, required = true) @PathParam(&quot;username&quot;) String username,</div><div class="line">      @ApiParam(value = &quot;Updated user object&quot;, required = true) User user) &#123;...&#125;</div></pre></td></tr></table></figure>
<p>如上面的例子所示，我们有两个参数。第一个username是路径的一部分，另一个是User对象，上例中作为body。两个参数都将quired属性设置为了true。@PathParam，尽管是多余的，但是因为它是默认强制毕业有点，且不能被覆盖。<br>以上生成的API为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&quot;parameters&quot;: [</div><div class="line">  &#123;</div><div class="line">    &quot;name&quot;: &quot;username&quot;,</div><div class="line">    &quot;in&quot;: &quot;path&quot;,</div><div class="line">    &quot;description&quot;: &quot;name that need to be deleted&quot;,</div><div class="line">    &quot;required&quot;: true,</div><div class="line">    &quot;type&quot;: &quot;string&quot;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    &quot;in&quot;: &quot;body&quot;,</div><div class="line">    &quot;name&quot;: &quot;body&quot;,</div><div class="line">    &quot;description&quot;: &quot;Updated user object&quot;,</div><div class="line">    &quot;required&quot;: true,</div><div class="line">    &quot;schema&quot;: &#123;</div><div class="line">      &quot;$ref&quot;: &quot;#/definitions/User&quot;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<h3 id="ApiImplicitParam-ApiImplicitParams"><a href="#ApiImplicitParam-ApiImplicitParams" class="headerlink" title="@ApiImplicitParam, @ApiImplicitParams"></a>@ApiImplicitParam, @ApiImplicitParams</h3><p>你可能希望手动对操作的参数进行描述，可能的理由有以下：</p>
<ul>
<li><blockquote>
<p>使用了没有采用JAX-RS标签的Servlets。</p>
</blockquote>
</li>
<li><blockquote>
<p>想隐藏一个参数，因为它已经被定义并且希望用完全不同的定义进行覆盖。</p>
</blockquote>
</li>
<li><blockquote>
<p>描述一个被过滤器或者其他资源优先获取的JAX-RS的实现类。</p>
</blockquote>
</li>
</ul>
<p>@ApiImplicitParams可以有多个@ApiImplicitParams进行定义多个参数,注意这个注解@ApiImplicitParam必须被包含在注解@ApiImplicitParams之内。。</p>
<p>当隐式定义多个参数时，name，dataType和paramType的定义是最重要的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">@ApiImplicitParams(&#123;</div><div class="line">    @ApiImplicitParam(name = &quot;name&quot;, value = &quot;User&apos;s name&quot;, required = true, dataType = &quot;string&quot;, paramType = &quot;query&quot;),</div><div class="line">    @ApiImplicitParam(name = &quot;email&quot;, value = &quot;User&apos;s email&quot;, required = false, dataType = &quot;string&quot;, paramType = &quot;query&quot;),</div><div class="line">    @ApiImplicitParam(name = &quot;id&quot;, value = &quot;User ID&quot;, required = true, dataType = &quot;long&quot;, paramType = &quot;query&quot;)</div><div class="line">  &#125;)</div><div class="line"> public void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;...&#125;</div></pre></td></tr></table></figure>
<p>在上例中，我们可以看到一个servlet定义和几个参数，dataType既可以是一个原语（primitive）也可以是一个类名。paramType可以是Swagger支持的任意类型的参数。</p>
<p>生成API为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">&quot;parameters&quot;: [</div><div class="line">  &#123;</div><div class="line">    &quot;name&quot;: &quot;name&quot;,</div><div class="line">    &quot;description&quot;: &quot;User&apos;s name&quot;,</div><div class="line">    &quot;required&quot;: true,</div><div class="line">    &quot;type&quot;: &quot;string&quot;,</div><div class="line">    &quot;in&quot;: &quot;query&quot;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    &quot;name&quot;: &quot;email&quot;,</div><div class="line">    &quot;description&quot;: &quot;User&apos;s email&quot;,</div><div class="line">    &quot;required&quot;: false,</div><div class="line">    &quot;type&quot;: &quot;string&quot;,</div><div class="line">    &quot;in&quot;: &quot;query&quot;</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    &quot;name&quot;: &quot;id&quot;,</div><div class="line">    &quot;description&quot;: &quot;User ID&quot;,</div><div class="line">    &quot;required&quot;: true,</div><div class="line">    &quot;type&quot;: &quot;integer&quot;,</div><div class="line">    &quot;format&quot;: &quot;int64&quot;,</div><div class="line">    &quot;in&quot;: &quot;query&quot;</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<p>ApiImplicitParam 与 ApiParam 的区别：</p>
<ul>
<li><blockquote>
<p>对Servlets或者非 JAX-RS的环境，只能使用 ApiImplicitParam。</p>
</blockquote>
</li>
<li><blockquote>
<p>在使用上，ApiImplicitParam比ApiParam具有更少的代码侵入性，只要写在方法上就可以了，但是需要提供具体的属性才能配合swagger ui解析使用。</p>
</blockquote>
</li>
<li><blockquote>
<p>ApiParam只需要较少的属性，与swagger ui配合更好。</p>
</blockquote>
</li>
</ul>
<h3 id="ResponseHeader"><a href="#ResponseHeader" class="headerlink" title="@ResponseHeader"></a>@ResponseHeader</h3><p>如果你需要描述一个响应头（response header），你可以提供的响应头的名称、描述和类型，简单地将它添加到@ApiOperation或@ApiResponse中。<br>例如在一个给出的响应中是这样的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@ApiResponses(value = &#123; </div><div class="line">    @ApiResponse(code = 400, message = &quot;Invalid ID supplied&quot;, </div><div class="line">                 responseHeaders = @ResponseHeader(name = &quot;X-Rack-Cache&quot;, description = &quot;Explains whether or not a cache was used&quot;, response = Boolean.class)),</div><div class="line">    @ApiResponse(code = 404, message = &quot;Pet not found&quot;) &#125;)</div><div class="line">public Response getPetById(...) &#123;...&#125;</div></pre></td></tr></table></figure>
<h2 id="Model声明"><a href="#Model声明" class="headerlink" title="Model声明"></a>Model声明</h2><h3 id="ApiModel"><a href="#ApiModel" class="headerlink" title="@ApiModel"></a>@ApiModel</h3><p>Swagger-core基于引用API内省的方式构建模型定义。@ApiModel允许操作模型的元数据从一个简单的描述或名称变为一个多态的定义。<br>最基础的功能如下，使用@ApiModel改变一个模型的名称并为其添加描述：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">@ApiModel(value=&quot;DifferentModel&quot;, description=&quot;Sample model for the documentation&quot;)</div><div class="line">class OriginalModel &#123;...&#125;</div></pre></td></tr></table></figure>
<p>上例我们改变模型的名称，输出结果为</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&quot;DifferentModel&quot;: &#123;</div><div class="line">      &quot;description&quot;: &quot;Sample model for the documentation&quot;,</div><div class="line">      ...</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>还可以使用@ApiModel通过指定子类型实现模型组成:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">@ApiModel(value = &quot;Pet&quot;, subTypes = &#123;Cat.class&#125;)</div><div class="line">public class Pet &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="ApiModelProperty"><a href="#ApiModelProperty" class="headerlink" title="@ApiModelProperty"></a>@ApiModelProperty</h3><p>尽管swagger-core会内省字段和setters/getters，它也可以读取和处理JAXB注释。@ApiModelProperty允许通过控制Swagger-specific定义被允许的值和增加的注解。它还提供了额外的过滤性能，以防你在某些情况下想隐藏属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">@ApiModelProperty(value = &quot;pet status in the store&quot;, allowableValues = &quot;available,pending,sold&quot;)</div><div class="line">public String getStatus() &#123;</div><div class="line">  return status;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上例为一个模型熟悉添加了描述，此外我们可以发现，虽然status是一个String类型，但是我们证明了他只有三个可能值。API输出为：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&quot;properties&quot;: &#123;</div><div class="line">        ...,</div><div class="line">        &quot;status&quot;: &#123;</div><div class="line">          &quot;type&quot;: &quot;string&quot;,</div><div class="line">          &quot;description&quot;: &quot;pet status in the store&quot;,</div><div class="line">          &quot;enum&quot;: [</div><div class="line">            &quot;available&quot;,</div><div class="line">            &quot;pending&quot;,</div><div class="line">            &quot;sold&quot;</div><div class="line">          ]</div><div class="line">        &#125;</div><div class="line">      &#125;</div></pre></td></tr></table></figure>
<h2 id="Swagger-Definition"><a href="#Swagger-Definition" class="headerlink" title="Swagger Definition"></a>Swagger Definition</h2><h3 id="SwaggerDefinition"><a href="#SwaggerDefinition" class="headerlink" title="@SwaggerDefinition"></a>@SwaggerDefinition</h3><p>SwaggerDefinition注解提供了许多与Swagger对象的顶级属性相关的属性，可以在自动生成的定义里设置这些属性。SwaggerDefinition注解可以加在任意类上，会在Swagger自动配置过程中国被扫描。此外，它可以用于标记/配置接口上，而不必须用于JAX-RS API类，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">@SwaggerDefinition(</div><div class="line">        info = @Info(</div><div class="line">                description = &quot;Gets the weather&quot;,</div><div class="line">                version = &quot;V12.0.12&quot;,</div><div class="line">                title = &quot;The Weather API&quot;,</div><div class="line">                termsOfService = &quot;http://theweatherapi.io/terms.html&quot;,</div><div class="line">                contact = @Contact(</div><div class="line">                   name = &quot;Rain Moore&quot;, </div><div class="line">                   email = &quot;rain.moore@theweatherapi.io&quot;, </div><div class="line">                   url = &quot;http://theweatherapi.io&quot;</div><div class="line">                ),</div><div class="line">                license = @License(</div><div class="line">                   name = &quot;Apache 2.0&quot;, </div><div class="line">                   url = &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;</div><div class="line">                )</div><div class="line">        ),</div><div class="line">        consumes = &#123;&quot;application/json&quot;, &quot;application/xml&quot;&#125;,</div><div class="line">        produces = &#123;&quot;application/json&quot;, &quot;application/xml&quot;&#125;,</div><div class="line">        schemes = &#123;SwaggerDefinition.Scheme.HTTP, SwaggerDefinition.Scheme.HTTPS&#125;,</div><div class="line">        tags = &#123;</div><div class="line">                @Tag(name = &quot;Private&quot;, description = &quot;Tag used to denote operations as private&quot;)</div><div class="line">        &#125;, </div><div class="line">        externalDocs = @ExternalDocs(value = &quot;Meteorology&quot;, url = &quot;http://theweatherapi.io/meteorology.html&quot;)</div><div class="line">)</div><div class="line">public interface TheWeatherApiConfig &#123;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上例所示的所有属性都会使相关元数据被添加到生成的swagger.json/swagger.yaml文件中。<br>如果添加了多个@SwaggerDefinition注解，他们会被按照顺序聚合——当出现重复的属性，将会出现覆盖。</p>
<h3 id="Info"><a href="#Info" class="headerlink" title="@Info"></a>@Info</h3><p>@Info注释添加通用的元数据属性定义——Info对象对应的规范。例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@SwaggerDefinition(</div><div class="line">        info = @Info(</div><div class="line">                description = &quot;Gets the weather&quot;,</div><div class="line">                version = &quot;V12.0.12&quot;,</div><div class="line">                title = &quot;The Weather API&quot;,</div><div class="line">                termsOfService = &quot;http://theweatherapi.io/terms.html&quot;,</div><div class="line">                ...</div><div class="line">        ),</div><div class="line">...</div></pre></td></tr></table></figure>
<h3 id="Contact"><a href="#Contact" class="headerlink" title="@Contact"></a>@Contact</h3><p>@Contact标签为@Info添加了contract属性——与Contract对象一样的规范。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">@SwaggerDefinition(</div><div class="line">        info = @Info(</div><div class="line">                ...</div><div class="line">                contact = @Contact(</div><div class="line">                   name = &quot;Rain Moore&quot;, </div><div class="line">                   email = &quot;rain.moore@theweatherapi.io&quot;, </div><div class="line">                   url = &quot;http://theweatherapi.io&quot;</div><div class="line">                ),</div><div class="line">                ...</div><div class="line">        ),</div><div class="line">...</div></pre></td></tr></table></figure>
<h3 id="License"><a href="#License" class="headerlink" title="@License"></a>@License</h3><p>@License标签为@Info添加了license属性——与license对象一样的规范。例如:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">@SwaggerDefinition(</div><div class="line">        info = @Info(</div><div class="line">                ...</div><div class="line">                license = @License(</div><div class="line">                   name = &quot;Apache 2.0&quot;, </div><div class="line">                   url = &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;</div><div class="line">                )</div><div class="line">        ),</div><div class="line">...</div></pre></td></tr></table></figure>
<h3 id="Extension"><a href="#Extension" class="headerlink" title="@Extension"></a>@Extension</h3><p>extension标签允许为Swagger定义添加扩展属性。目前支持在@ApiOperation @Info和@Tag注释。有两种方法可以使用它:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">   extensions = &#123;</div><div class="line">       @Extension(properties = &#123;</div><div class="line">           @ExtensionProperty(name = &quot;test1&quot;, value = &quot;value1&quot;),</div><div class="line">           @ExtensionProperty(name = &quot;test2&quot;, value = &quot;value2&quot;)</div><div class="line">       &#125;)</div><div class="line">    &#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>这种方法得到的是：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">   &quot;x-test1&quot; : &quot;value1&quot;,</div><div class="line">   &quot;x-test2&quot; : &quot;value2&quot;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>如果注释中没有明确说明，属性名会自动加上前缀“x-”。<br>另外一种方法可以命名扩展属性：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">   extensions = &#123; </div><div class="line">       @Extension( name = &quot;my-extension&quot;, properties = &#123;</div><div class="line">           @ExtensionProperty(name = &quot;test1&quot;, value = &quot;value1&quot;),</div><div class="line">           @ExtensionProperty(name = &quot;test2&quot;, value = &quot;value2&quot;)</div><div class="line">       &#125;)</div><div class="line">    &#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<p>会得到将扩展属性包裹在json对象中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">   &quot;x-my-extension&quot; : &#123;</div><div class="line">      &quot;test1&quot; : &quot;value1&quot;,</div><div class="line">      &quot;test2&quot; : &quot;value2&quot;</div><div class="line">   &#125;</div><div class="line">...</div></pre></td></tr></table></figure>
<h3 id="ExtensionProperty"><a href="#ExtensionProperty" class="headerlink" title="@ExtensionProperty"></a>@ExtensionProperty</h3><p>这并不是一个独立的扩展属性，用法详见@Extension的例子。</p>
<h2 id="定制Swagger定义"><a href="#定制Swagger定义" class="headerlink" title="定制Swagger定义"></a>定制Swagger定义</h2><p>如果现有的标签都不适用，你需要自定义标签，你可以使用Swagger引擎，ReaderListener提供了相关回调函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">public interface ReaderListener &#123;</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Called before the Swagger definition gets populated from scanned classes. Use this method to</div><div class="line">     * pre-process the Swagger definition before it gets populated.</div><div class="line">     *</div><div class="line">     * @param reader the reader used to read annotations and build the Swagger definition</div><div class="line">     * @param swagger the initial swagger definition</div><div class="line">     */</div><div class="line"></div><div class="line">    void beforeScan(Reader reader, Swagger swagger);</div><div class="line"></div><div class="line">    /**</div><div class="line">     * Called after a Swagger definition has been populated from scanned classes. Use this method to</div><div class="line">     * post-process Swagger definitions.</div><div class="line">     *</div><div class="line">     * @param reader the reader used to read annotations and build the Swagger definition</div><div class="line">     * @param swagger the configured Swagger definition</div><div class="line">     */</div><div class="line"></div><div class="line">    void afterScan(Reader reader, Swagger swagger);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>当类在进行资源扫描中发现该注释，自定义的注释会被被实例化并进行相应的调用。例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">public class BasePathModifier implements ReaderListener &#123;</div><div class="line">    void beforeScan(Reader reader, Swagger swagger)&#123;&#125;</div><div class="line"></div><div class="line">    void afterScan(Reader reader, Swagger swagger)&#123;</div><div class="line">        swagger.setBasePath( System.getProperty( &quot;swagger.basepath&quot;, swagger.getBasePath() ));</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div></article></div></section><footer><div class="paginator"><a href="/2017/11/07/程序中的返回码/" class="prev"><button class="ui button teal">上一篇</button></a><a href="/2017/04/11/devicemapper设置direct-LVM踩坑记/" class="next"><button class="ui button teal">下一篇</button></a></div><div class="copyright"><p>© 2016 - 2018 <a href="http://yoursite.com">Rosy</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and theme by <a href="https://github.com/littlewin-wang/hexo-theme-casual" target="_blank">casual</a></p></div></footer></div><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script><script src="/js/jquery.goup.min.js"></script><script src="/js/semantic.min.js"></script><script src="/js/casual.js"></script><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><script>$(document).ready(function(){$.goup({trigger:100,bottomOffset:100,locationOffset:5,title:'',titleAsText:true});});</script><script>(function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){(w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);})(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
_st('install','TvAnFS4AVxjiJUvrZJRB','2.0.0');</script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></div></body></html>